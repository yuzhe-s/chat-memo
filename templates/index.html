<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ— åˆ™ã®è¯—</title>
    <!-- é¢„è¿æ¥åˆ° CDNï¼ŒåŠ é€Ÿèµ„æºåŠ è½½ -->
    <link rel="preconnect" href="https://cdn.socket.io">
    <link rel="dns-prefetch" href="https://cdn.socket.io">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- å¯¼èˆªæ  -->
        <nav class="navbar">
            <div class="nav-container">
                <h1 class="logo">ğŸ’¬ æ— åˆ™ã®è¯—</h1>
                <div class="nav-links">
                    <a href="/app" class="nav-link active">é¦–é¡µ</a>
                    <a href="/app/create" class="nav-link">åˆ›å»ºçº¸æ¡</a>
                    <a href="/app/search" class="nav-link">æœç´¢</a>
                </div>
            </div>
        </nav>

        <!-- ä¸»å†…å®¹ -->
        <div class="main-container">
            <!-- ä¾§è¾¹æ  -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3>çƒ­é—¨æ ‡ç­¾</h3>
                    <div class="tags-list" id="tags-list">
                        {% for tag in tags %}
                        <span class="tag" style="background-color: {{ tag.color }}20; color: {{ tag.color }}; border: 1px solid {{ tag.color }};">
                            {{ tag.name }}
                        </span>
                        {% endfor %}
                    </div>
                </div>

                <div class="sidebar-section">
                    <h3>å¿«é€Ÿæ“ä½œ</h3>
                    <a href="/app/create" class="btn btn-primary btn-full">+ æ–°å»ºçº¸æ¡</a>
                </div>
            </aside>

            <!-- çº¸æ¡åˆ—è¡¨ -->
            <main class="content">
                <div class="notes-list" id="notes-list">
                    {% for note in notes %}
                    <div class="note-card" onclick="window.location.href='/note/{{ note.id }}'">
                        <div class="note-header">
                            <h3 class="note-title">{{ note.title }}</h3>
                            <div class="note-meta">
                                <span class="note-date">{{ note.created_at.strftime('%Y-%m-%d') }}</span>
                                <span class="note-views">ğŸ‘ {{ note.view_count }}</span>
                            </div>
                        </div>

                        {% if note.content %}
                        <p class="note-preview">{{ note.content[:100] }}{% if note.content|length > 100 %}...{% endif %}</p>
                        {% endif %}

                        <div class="note-footer">
                            <div class="note-tags">
                                {% for tag in note.tags %}
                                <span class="tag-small" style="background-color: {{ tag.color }}20; color: {{ tag.color }};">
                                    {{ tag.name }}
                                </span>
                                {% endfor %}
                            </div>
                            <div class="note-stats">
                                <span>ğŸ’¬ {{ note.message_count }} æ¡æ¶ˆæ¯</span>
                            </div>
                        </div>
                    </div>
                    {% endfor %}

                    {% if not notes %}
                    <div class="empty-state">
                        <p>è¿˜æ²¡æœ‰çº¸æ¡ï¼Œ<a href="/app/create">åˆ›å»ºç¬¬ä¸€ä¸ªçº¸æ¡</a>å§ï¼</p>
                    </div>
                    {% endif %}
                </div>
            </main>
        </div>
    </div>

    <script>
        window.currentUserId = "{{ user_id }}";
    </script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
