<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>创建纸条 - 无则の诗</title>
    <!-- 预连接到 CDN，加速资源加载 -->
    <link rel="preconnect" href="https://cdn.socket.io">
    <link rel="dns-prefetch" href="https://cdn.socket.io">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- 导航栏 -->
        <nav class="navbar">
            <div class="nav-container">
                <h1 class="logo">💬 无则の诗</h1>
                <div class="nav-links">
                    <a href="/" class="nav-link">首页</a>
                    <a href="/create" class="nav-link active">创建纸条</a>
                    <a href="/search" class="nav-link">搜索</a>
                </div>
            </div>
        </nav>

        <!-- 创建表单 -->
        <div class="container form-container">
            <h2>📝 创建新纸条</h2>
            <p class="form-hint">填写纸条信息，开始一段对话</p>

            <form id="create-form">
                <div class="form-group">
                    <label for="note-title">标题 <span class="required">*</span></label>
                    <input type="text" id="note-title" placeholder="纸条标题..." maxlength="200" required>
                </div>

                <div class="form-group">
                    <label for="note-content">初始内容（可选）</label>
                    <textarea id="note-content" placeholder="纸条的初始内容..." rows="6"></textarea>
                    <small class="form-hint">这将是纸条的第一条消息</small>
                </div>

                <div class="form-group">
                    <label>标签</label>
                    <div class="tag-selector">
                        <div class="existing-tags">
                            {% for tag in tags %}
                            <label class="tag-checkbox">
                                <input type="checkbox" name="tags" value="{{ tag.name }}">
                                <span class="tag-label" style="background-color: {{ tag.color }}20; color: {{ tag.color }}; border: 1px solid {{ tag.color }};">
                                    {{ tag.name }}
                                </span>
                            </label>
                            {% endfor %}
                        </div>
                        <div class="new-tag">
                            <input type="text" id="new-tag-input" placeholder="创建新标签...">
                            <button type="button" id="add-tag-btn" class="btn btn-small">添加</button>
                        </div>
                    </div>
                    <small class="form-hint">选择现有标签或创建新标签</small>
                </div>

                <div class="form-group">
                    <label for="note-password">访问密码（可选）</label>
                    <input type="password" id="note-password" placeholder="留空则无需密码，填写后需要密码才能查看和进入">
                    <small class="form-hint">设置密码后，只有知道密码的用户才能查看和参与此纸条</small>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">创建纸条</button>
                    <button type="button" class="btn btn-secondary" onclick="window.location.href='/'">取消</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        window.currentUserId = "{{ user_id }}";
    </script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
